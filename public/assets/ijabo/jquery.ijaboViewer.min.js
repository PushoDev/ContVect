!function($,window,document,undefined){const callback=function(fn,...params){return"function"==typeof fn&&fn(...params)};$.fn.ijaboViewer=function(options){const nameOnly=options.nameOnly||!1,maxWidth=options.maxWidth||null,maxHeight=options.maxHeight||null,imageShape=options.imageShape||null,allowedExtensions=options.allowedExtensions||null;$(options.preview).attr("src",$(options.preview).data("ijabo-default-img")),$(this).val(""),$(this).change((function(e){e.preventDefault();const file=$(this)[0].files[0],element=$(this);var filename=file.name.toLowerCase(),file_extension=filename.substring(filename.lastIndexOf(".")+1);if(null!=allowedExtensions&&-1==$.inArray(file_extension,options.allowedExtensions)&&($(options.preview).attr("src",$(options.preview).data("ijabo-default-img")),callback(options.onInvalidType,"Invalid file type",element,file.target,this),$(element).val("")),nameOnly)$(options.preview).html(file.name);else{const reader=new FileReader;reader.onload=function(file){const image=new Image,content=file.target.result;image.src=content,image.onload=function(img){const height=this.height,width=this.width,ratio=width/height;return null!=imageShape&&"square"==imageShape&&1!=ratio?(callback(options.onErrorShape,"Image must be square",element,file.target,this),$(options.preview).attr("src",$(options.preview).data("ijabo-default-img")),$(element).val(""),!1):null!=imageShape&&"rectangular"==imageShape&&ratio<=1?(callback(options.onErrorShape,"Image must be rectagular",element,file.target,this),$(options.preview).attr("src",$(options.preview).data("ijabo-default-img")),$(element).val(""),!1):(callback(options.onBeforePreview,element,file.target,this),$(options.preview).attr("src",content),callback(options.onAfterPreview,element,file.target,this),void callback(options.onSuccess,element,file.target,this))}},reader.readAsDataURL(file)}}))}}($,window,document);